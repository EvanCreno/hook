<script type="text/javascript" src="autobahn.js"></script>
<script type="text/javascript">

// The host (our Ratchet WebSocket server) to connect to
var conn = new ab.Session('ws://localhost:8080/hello', function() {
  console.log("Connection established.");
  conn.subscribe('category', function(topic, data) {
    console.log('New article published to category "' + topic + '" : ' + data.title);
  });
}, function() {
  // When the connection is closed
  console.warn('WebSocket connection closed');
}, {
  // Additional parameters, we're ignoring the WAMP sub-protocol for older browsers
  'skipSubprotocolCheck': true
});

// var conn = new autobahn.Connection({
//   url: 'ws://127.0.0.1:8080/',
//   realm: 'realm2'
// });
// conn.onopen = function (session) {
//   console.log("opened");
//   var received = 0;
//   session.subscribe('com.myapp.topic1', function (args) {
//     console.log("Got event:", args[0]);
//     received += 1;
//     if (received > 5) {
//       console.log("Closing ..");
//       conn.close();
//     }
//   });
// };
// conn.open();

</script>
